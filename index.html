<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Weather App - SweetTech</title>
  <meta name="description" content="Free Code Camp Local Weather Challenge">
  <meta name="author" content="Patrick Sweetman">
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
  <style type="text/css">

  body {

    font-family: 'VT323', monospace;
    font-size: 150%;
    text-align: center;
    background-color: #495063;

  }

  #background {

    position:absolute;

    height:99%;
    width:99%;

  }

  #icon-container {

    height:auto;
    width:98%;
    padding-top: 20px;

  }

  #weather-icon {

    height: 100%;

  }

  #content-box {

    width: 35%;
    height: auto;
    background-color:#58FA82;
    margin-left: 33%;
    margin-top: 15%;
    border-radius: 5%;
    padding-bottom: 10px;
  }


  </style>
</head>

<body>

  <div>

    <div id="background">

      <div id="content-box">

        <div id="icon-container">

          <img id="weather-icon" src="">

        </div>

        <div id="city-container">

          <h2>City: <span id="city"></span></h2>

        </div>

        <div id="temp-container">

          <h3>Temperature: <span id="temp"></span></h3>

        </div>

        <div id="unit-buttons">

          <input id="farenheit" type="radio" name="temp-units" value="F" checked>°F
          <input id="celcius" type="radio" name="temp-units" value="C">°C

        </div>

      </div>

      </div>

  </div>

<script type="text/javascript">

function() {

  //If geolocation is available
  if ("geolocation" in navigator) {

    var coords, city, lat, lon, region, weatherJSON;

    //IP & Location Info: http://ipinfo.io/developers/getting-started
    $.getJSON('http://ipinfo.io', function(data) {

      city = data.city;
      coords = data.loc;
      coords = coords.split(",");
      lat = coords[0];
      lon = coords[1];

      //Set Initial Page Information
      weatherJSON = "http://api.openweathermap.org/data/2.5/weather?lat=" + lat + "&lon=" + lon + "&appid=284ef95ba09144d17281ea34b72c56ed&units=imperial";

      //Weather API: https://openweathermap.org/current#geo
      $.getJSON(weatherJSON, function(json) {

        var currentTemp = json.main.temp;
        var currentCond = json.weather[0].main;
        var icon = json.weather[0].icon;

        icon = "http://openweathermap.org/img/w/" + icon +".png"

        console.log(icon);

        //Assign current values to webpage
        $("#temp").text(currentTemp + " °F");
        $("#city").text(city);
        //$("#my_image").attr("src","second.jpg");
        $("#weather-icon").attr("src",icon);

      });

      //Changes Units to C/F on button click
      $("#farenheit").click( function() {
        //Set Initial Page Information
      weatherJSON = "http://api.openweathermap.org/data/2.5/weather?lat=" + lat + "&lon=" + lon + "&appid=284ef95ba09144d17281ea34b72c56ed&units=imperial";

      //Weather API: https://openweathermap.org/current#geo
      $.getJSON(weatherJSON, function(json) {

        var currentTemp = json.main.temp;
        var currentCond = json.weather[0].main;
        var icon = json.weather[0].icon;

        icon = "http://openweathermap.org/img/w/" + icon +".png"

        console.log(icon);

        //Assign current values to webpage
        $("#temp").text(currentTemp + " °F");
        $("#city").text(city);
        //$("#my_image").attr("src","second.jpg");
        $("#weather-icon").attr("src",icon);

      });
      });

      //Updates page when Celcius Button Clicked
      $("#celcius").click( function() {

        //Set Initial Page Information
      weatherJSON = "http://api.openweathermap.org/data/2.5/weather?lat=" + lat + "&lon=" + lon + "&appid=284ef95ba09144d17281ea34b72c56ed&units=metric";

      //Weather API: https://openweathermap.org/current#geo
      $.getJSON(weatherJSON, function(json) {

        var currentTemp = json.main.temp;
        var currentCond = json.weather[0].main;
        var icon = json.weather[0].icon;

        icon = "http://openweathermap.org/img/w/" + icon +".png"

        console.log(icon);

        //Assign current values to webpage
        $("#temp").text(currentTemp + " °C");
        $("#city").text(city);
        //$("#my_image").attr("src","second.jpg");
        $("#weather-icon").attr("src",icon);

      });


      });



    });

  }

};


</script>
</body>
</html>
